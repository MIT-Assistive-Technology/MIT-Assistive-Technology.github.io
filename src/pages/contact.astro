---
// src/pages/contact.astro
import BaseLayout from '@/layouts/BaseLayout'
---

<BaseLayout title='Contact Us'>
	<section class='max-w-2xl mx-auto py-12 px-6'>
		<h1 class='text-3xl font-bold mb-6 text-center'>Contact Us</h1>
		<p class='mb-8 text-center text--700'>
			We'd love to hear from you! Reach out with questions, feedback, or collaboration ideas.
		</p>

		<!-- Contact Form -->
		<form id='contact-form' class='bg-white shadow-md rounded-lg p-6 space-y-4'>
			<div>
				<label for='name' class='block text-sm font-medium text-gray-700'>Your Name</label>
				<input
					type='text'
					id='name'
					name='name'
					required
					class='mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500'
				/>
			</div>

			<div>
				<label for='email' class='block text-sm font-medium text-gray-700'>Your Email</label>
				<input
					type='email'
					id='email'
					name='email'
					required
					class='mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500'
				/>
			</div>

			<div>
				<label for='message' class='block text-sm font-medium text-gray-700'>Message</label>
				<textarea
					id='message'
					name='message'
					rows='4'
					required
					class='mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500'
				></textarea>
			</div>

			<button
				type='submit'
				class='w-full py-2 px-4 bg-indigo-600 text-white font-semibold rounded-lg shadow hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500'
			>
				Send Message
			</button>
		</form>

		<!-- Success / Error Messages -->
		<div id='form-status' class='mt-4 text-center hidden'></div>

		<!-- Other Ways to Connect -->
		<div class='mt-10 text-center'>
			<p class='mb-4'>You can also connect with us here:</p>
			<div class='flex justify-center space-x-6'>
				<a href='mailto:assistive-technology-exec@mit.edu' class='text-indigo-600 hover:underline'>
					Email
				</a>
				<a
					href='https://www.instagram.com/assistivetech_mit/'
					target='_blank'
					class='text-indigo-600 hover:underline'
				>
					Instagram
				</a>
				<a
					href='https://www.linkedin.com/company/mit-assistive-technology-club'
					target='_blank'
					class='text-indigo-600 hover:underline'
				>
					LinkedIn
				</a>
			</div>
		</div>
	</section>

	<!-- Inline Script to handle form -->
	<script>
		const form = document.getElementById('contact-form')
		const statusDiv = document.getElementById('form-status')

		form.addEventListener('submit', async (event) => {
			event.preventDefault()
			statusDiv.classList.remove('hidden')
			statusDiv.textContent = 'Sending...'
			statusDiv.className = 'mt-4 text-center text-gray-600'

			const data = new FormData(form)

			try {
				const response = await fetch('https://formspree.io/f/xwprwvkk', {
					method: 'POST',
					body: data,
					headers: { Accept: 'application/json' }
				})

				if (response.ok) {
					statusDiv.textContent = '✅ Thank you! Your message has been sent.'
					statusDiv.className = 'mt-4 text-center text-green-600 font-semibold'
					form.reset()
				} else {
					statusDiv.textContent = '❌ Oops! There was a problem submitting your form.'
					statusDiv.className = 'mt-4 text-center text-red-600 font-semibold'
				}
			} catch (err) {
				statusDiv.textContent = '❌ Network error. Please try again later.'
				statusDiv.className = 'mt-4 text-center text-red-600 font-semibold'
			}
		})
	</script>
</BaseLayout>
